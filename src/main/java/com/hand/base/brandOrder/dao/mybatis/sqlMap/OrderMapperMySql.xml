<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hand.base.brandOrder.dao.mybatis.mapper.OrderMapper">
	<resultMap type="com.hand.base.brandOrder.model.Order"
		id="order"></resultMap>
	<resultMap type="com.hand.base.brandOrder.model.OrderExport"
		id="orderExport"></resultMap>
	<resultMap type="com.hand.base.brandOrder.model.Order" id="orderResult">
  		<id column="id" property="id"/>
		<result property="orderTime" column="orderTime"/>
		<result property="orderNum" column="orderNum"/>
		<result property="storeName" column="storeName"/>
		<result property="addressAll" column="addressAll"/>
		<result property="recieverName" column="recieverName"/>
		<result property="recieverPhone" column="recieverPhone"/>
		<result property="orderTotalPrice" column="orderTotalPrice"/>
		<result property="orderStatus" column="orderStatus"/>
		<result property="logisticsStatus" column="logisticsStatus"/>
		 
		 <collection property="orderItem" ofType="com.hand.base.brandOrder.model.OrderItem">
			<result property="merchPic" column="merchPic"/>
			<result property="merchName" column="merchName"/>
			<result property="qty" column="qty"/>
		 </collection>
		 
    </resultMap>
    
	<sql id="queryAllSql">
	SELECT 
		 T1.ROW_ID            as id                  /*记录编号*/
		,DATE_FORMAT(T1.CREATED, '%Y-%m-%d %H:%i:%S') as created             /*创建时间*/
		,T1.CREATED_BY        as createdBy           /*创建者ID*/
		,DATE_FORMAT(T1.LAST_UPD, '%Y-%m-%d %H:%i:%S') as lastUpdated         /*最后更新时间*/
		,T1.LAST_UPD_BY       as lastUpdatedBy       /*最后更新者ID*/
		,T1.CORP_ID           as corpid              /*公司账套*/
		,T1.ORDER_NUM         as orderNum            /*订单编号*/
		,T2.`NAME` 			  as customerName        /*消费者名称*/
		,T1.ACCNT_ID 		  as customerId        	 /*消费者名称*/
		,T2.MAIN_PH_NUM 	  as mainPhNum			 /*消费者电话*/
		,t3.contact   		  as recieverName		 /*收货人姓名*/
		,T1.ATTRIB_36         as province            /*省（收货地址）*/
		,T1.ATTRIB_37         as city                /*城市（收货地址）*/
		,T1.ATTRIB_38         as district            /*区县（收货地址）*/
		,T1.ATTRIB_01         as address	         /*详细地址（收货地址）*/
		,concat(T1.ATTRIB_36,T1.ATTRIB_37,T1.ATTRIB_38,T1.ATTRIB_01)  as addressAll	  /*详细地址（收货地址）*/
		,T1.ATTRIB_35            as recieverPhone	     /*收货人电话*/
		,T1.ATTRIB_39         as storeName           /*商户名称*/
		,T1.ATTRIB_48         as orderStatus         /*订单状态*/
		,DATE_FORMAT(T1.order_dt,'%Y-%m-%d %H:%i:%S')    as orderTime           /*下单时间*/
		,T1.ATTRIB_17         as orderTotalPrice     /*订单总金额*/
		,T1.O2O_PAY_TYPE      as o2oPayType          /*支付方式*/
		,DATE_FORMAT(T1.ATTRIB_26,'%Y-%m-%d %H:%i:%s') as attrib26 				/*付款时间*/
		,T1.ATTRIB_07         as logisticsStatus     /*物流状态*/
		,T1.LOGISTICS_COMPANY 		  as logisticsCompany	 /*物流公司*/
		,T1.LOGISTICS_ODD_NUMBER as logisticsOddNumber/*物流单号*/
		,DATE_FORMAT(t1.SHIPPING_TIME,'%Y-%m-%d %H:%i:%s') as shippingTime		/*发运时间*/
		,T1.ATTRIB_20         as tAttr20             /*优惠券金额*/
		,ROUND((
				IFNULL (T1.ATTRIB_16, 0) + IFNULL (T1.ATTRIB_20, 0) + IFNULL (T1.ATTRIB_22, 0) + IFNULL (T1.ATTRIB_21, 0)
			),2) 			  as offerSum 			 /*优惠总金额*/
		,T1.ATTRIB_47         as customerMsg         /*买家留言*/
		,DATE_FORMAT(T1.ATTRIB_57,'%Y-%m-%d %H:%i:%s') as  refuseRefundDate /*取消时间*/
		,T1.cancel_reason 	  as  cancelReason /*取消原因*/
		,T1.FIGHT_GROUPS_ID   as fightGroupsId       /*拼团id*/
		,T1.o2o_coupon_id     as couponId            /*优惠券id*/
		,T1.FREIGHT           as freight             /*运费*/
	</sql>
	
	<sql id="fromTableSql">
	FROM S_ORDER_X T1
	LEFT JOIN lnk_accnt T2 ON T1.ACCNT_ID = T2.ROW_ID
	LEFT JOIN CX_O_ADDRESS T3 ON T1.O2O_RECIEVER_ID = T3.ROW_ID
	WHERE 1=1
	</sql>
	
	<sql id="whereAllSql">
		AND T1.ATTRIB_09 ='Y'
		AND T1.ORDER_TYPE = 'brand'
		<if test=" attr1 == 'delivery' ">
			and T1.ATTRIB_48 in ('To Deliver', 'To Receive')
		</if>
		<if test=" usersystemRole != 'super_administrator' ">
			and t1.corp_id = #{usercorpid}
		</if>
		<if test=" usersystemRole == 'super_administrator' ">
			and t1.corp_id != '101' and t1.corp_id != '' and t1.corp_id is not null
		</if>
		
		<if test="orderNum != null and orderNum != ''">
			and T1.ORDER_NUM like concat('%',#{orderNum},'%') 
		</if>
		<if test="customerName != null and customerName != ''">
			and T2.NAME like concat('%',#{customerName},'%') 
		</if>
		<if test="recieverName != null and recieverName != ''">
			and t3.contact  like concat('%',#{recieverName},'%') 
		</if>
		<if test="mainPhNum != null and mainPhNum != ''">
			and T2.MAIN_PH_NUM like concat('%',#{mainPhNum},'%') 
		</if>
		<if test="addressAll != null and addressAll != ''">
			and concat(T1.ATTRIB_36,T1.ATTRIB_37,T1.ATTRIB_38,T1.ATTRIB_01) like concat('%',#{addressAll},'%') 
		</if>
		<if test="recieverPhone != null and recieverPhone != ''">
			and T1.ATTRIB_35 like concat('%',#{recieverPhone},'%') 
		</if>
		<if test="storeName != null and storeName != ''">
			and T1.ATTRIB_39 like concat('%',#{storeName},'%') 
		</if>
		<if test="orderStatus != null and orderStatus != ''">
			and T1.ATTRIB_48 = #{orderStatus}
		</if>
		<if test="logisticsStatus != null and logisticsStatus != ''">
			and T1.ATTRIB_07 = #{logisticsStatus}
		</if>
		<if test="logisticsCompany != null and logisticsCompany != ''">
			and T1.LOGISTICS_COMPANY = #{logisticsCompany}
		</if>
		<if test="attr3 != null and attr3 != ''">
			and T1.order_dt &gt;= #{attr3}
		</if>
		<if test="attr4 != null and attr4 != ''">
			and T1.order_dt &lt;= #{attr4}
		</if>
		<if test="attr2 != null and attr2 != ''">
			and T1.ATTRIB_26 &gt;= #{attr2}
		</if>
		<if test="attr5 != null and attr5!= ''">
			and T1.ATTRIB_26 &lt;= #{attr5}
		</if>
		<if test="attr6 != null and attr6 != ''">
			and t1.SHIPPING_TIME &gt;= #{attr6}
		</if>
		<if test="attr7 != null and attr7 != ''">
			and t1.SHIPPING_TIME &lt;= #{attr7}
		</if>
	</sql>
	
	<sql id="orderByAllSql">
		order by t1.CREATED desc
	</sql>	
	
	<!-- 记录总数 -->
	<select id="queryCountByExample" resultType="java.lang.Integer" parameterType="com.hand.base.brandOrder.model.Order">
		SELECT count(1)
		<include refid="fromTableSql"/>
		<include refid="whereAllSql"/>
	</select>
	
	<select id="queryByExamplePage" resultMap="order"
		parameterType="com.hand.base.brandOrder.model.Order">
		<include refid="queryAllSql"/>
		<include refid="fromTableSql"/>
		<include refid="whereAllSql"/>
		<include refid="orderByAllSql"/>
	</select>
	
	<select id="brandQueryByExamplePage" resultMap="order"
		parameterType="com.hand.base.brandOrder.model.Order">
		<include refid="queryAllSql"/>
		<include refid="fromTableSql"/>
		<include refid="whereAllSql"/>
		<include refid="orderByAllSql"/>
	</select>
	
	<select id="batchQueryOrderPage" parameterType="com.hand.base.brandOrder.model.Order" resultMap="orderResult">
		SELECT 
		 T1.ROW_ID            as id                  /*记录编号*/
		,T1.ORDER_NUM         as orderNum            /*订单编号*/
		,t3.contact   		  as recieverName		 /*收货人姓名*/
		,concat(T1.ATTRIB_36,T1.ATTRIB_37,T1.ATTRIB_38,T1.ATTRIB_01)  as addressAll	  /*详细地址（收货地址）*/
		,T1.ATTRIB_35            as recieverPhone	     /*收货人电话*/
		,T1.ATTRIB_39         as storeName           /*商户名称*/
		,T1.ATTRIB_48         as orderStatus         /*订单状态*/
		,DATE_FORMAT(T1.order_dt,'%Y-%m-%d %H:%i:%S')    as orderTime           /*下单时间*/
		,T1.ATTRIB_17         as orderTotalPrice     /*订单总金额*/
		,T1.ATTRIB_07         as logisticsStatus     /*物流状态*/
		,t12.O2O_DISPLAY_NAME merchName /*商品名称*/
		,t11.QTY_REQ qty /*数量*/
		,t14.path merchPic /*商品图片*/
		FROM S_ORDER_X T1
		LEFT JOIN lnk_accnt T2 ON T1.ACCNT_ID = T2.ROW_ID
		LEFT JOIN CX_O_ADDRESS T3 ON T1.O2O_RECIEVER_ID = T3.ROW_ID
		JOIN (S_ORDER_ITEM_X t11 LEFT JOIN S_PROD_INT_X t12 ON t11.PROD_ID = t12.row_id
			   LEFT JOIN (cx_o_prod_pic t13  LEFT JOIN cx_o_img t14 ON t14.row_id = t13.pic_id)
			   on t13.prod_id = T11.PROD_ID
			)ON T1.row_id = t11.ORDER_ID
		where 1 = 1
		<include refid="whereAllSql"/>	
		GROUP BY t11.row_id		
		ORDER BY T1.created DESC		
	</select>

	<select id="batchQueryOrderExportPage" parameterType="com.hand.base.brandOrder.model.Order" resultMap="orderExport">
		SELECT
		T1.ROW_ID            as id                  /*记录编号*/
		,T1.ORDER_NUM         as orderNum            /*订单编号*/
		,T2.`NAME` 			  as customerName        /*消费者名称*/
		,t3.contact   		  as recieverName		 /*收货人姓名*/
		,concat(T1.ATTRIB_36,T1.ATTRIB_37,T1.ATTRIB_38,T1.ATTRIB_01)  as addressAll	  /*详细地址（收货地址）*/
		,T1.ATTRIB_35            as recieverPhone	 /*收货人电话*/
		,T1.ATTRIB_39         as storeName           /*商户名称*/
		,T1.ATTRIB_48         as orderStatus         /*订单状态*/
		,DATE_FORMAT(T1.order_dt,'%Y-%m-%d %H:%i:%S')    as orderTime             /*下单时间*/
		,T1.ATTRIB_17         as orderTotalPrice     /*订单总金额*/
		,T1.O2O_PAY_TYPE      as o2oPayType          /*支付方式*/
		,DATE_FORMAT(T1.ATTRIB_26,'%Y-%m-%d %H:%i:%s') as attrib26 				  /*付款时间*/
		,T1.ATTRIB_07         as logisticsStatus     /*物流状态*/
		,T1.LOGISTICS_COMPANY 		  as logisticsCompany	 /*物流公司*/
		,T1.LOGISTICS_ODD_NUMBER as logisticsOddNumber/*物流单号*/
		,DATE_FORMAT(t1.SHIPPING_TIME,'%Y-%m-%d %H:%i:%s') as shippingTime		  /*发运时间*/
		,T1.ATTRIB_20         as tAttr20             /*优惠券金额*/
		,ROUND((
		IFNULL (T1.ATTRIB_16, 0) + IFNULL (T1.ATTRIB_20, 0) + IFNULL (T1.ATTRIB_22, 0) + IFNULL (T1.ATTRIB_21, 0)
		),2) 			  as offerSum 			     /*优惠总金额*/
		,T1.ATTRIB_47         as customerMsg         /*买家留言*/
		,DATE_FORMAT(T1.ATTRIB_57,'%Y-%m-%d %H:%i:%s') as  refuseRefundDate        /*取消时间*/
		,T1.cancel_reason 	  as  cancelReason       /*取消原因*/
		,T1.FIGHT_GROUPS_ID   as fightGroupsId       /*拼团Id*/
		,T1.o2o_coupon_id     as couponId            /*优惠券Id*/
		,T1.FREIGHT           as freight             /*运费*/
		,t12.O2O_DISPLAY_NAME merchName              /*商品名称*/
		,t12.BAR_CODE         as productCode		 /*商品条形码，69码*/
		,T11.BASE_UNIT_PRI     as price              /*报价*/
		,t11.QTY_REQ qty 							 /*数量*/
		,T11.ATTRIB_17         as attrib17           /*报价总金额*/
		,T11.NET_PRI           as pmoPrice           /*成交价*/
		,T11.ATTRIB_19         as tAttr19            /*成交金额*/
		,T11.ATTRIB_11         as attrib11           /*是否赠品*/
		,T11.ATTRIB_03         as campId              /*促销活动编码*/
		,T13.NAME			  as activityName		 /*促销活动名称*/
		,ROUND(IF( T1.ATTRIB_11 = 'Y', 0, IFNULL(T1.ATTRIB_17, 0) - IFNULL(T1.ATTRIB_19, 0)),2) merchantOfferSum /*优惠总金额*/
		FROM S_ORDER_X T1
		LEFT JOIN lnk_accnt T2 ON T1.ACCNT_ID = T2.ROW_ID
		LEFT JOIN CX_O_ADDRESS T3 ON T1.O2O_RECIEVER_ID = T3.ROW_ID
		JOIN (S_ORDER_ITEM_X t11
				LEFT JOIN S_PROD_INT_X t12 ON t11.PROD_ID = t12.row_id
				LEFT JOIN CX_O_PMO_SP T13 ON T11.ATTRIB_03 = T13.row_id
		)ON T1.row_id = t11.ORDER_ID
		where 1 = 1
		<include refid="whereAllSql"/>
		GROUP BY t11.row_id
		ORDER BY T1.created DESC
	</select>

	<select id="queryById" resultMap="order"
		parameterType="com.hand.base.brandOrder.model.Order">
		<include refid="queryAllSql"/>
		<include refid="fromTableSql"/>
		and T1.ROW_ID=#{id}
	</select>
	
	<select id="brandQueryById" resultMap="order"
		parameterType="com.hand.base.brandOrder.model.Order">
		<include refid="queryAllSql"/>
		<include refid="fromTableSql"/>
		and T1.ROW_ID=#{id}
	</select>
	<select id="queryAll" resultMap="order"
		parameterType="com.hand.base.brandOrder.model.Order">
		<include refid="queryAllSql"/>
		<include refid="fromTableSql"/>
		<include refid="whereAllSql"/>
	</select>

	<insert id="insert" parameterType="com.hand.base.brandOrder.model.Order">
		INSERT INTO S_ORDER_X(
		 ROW_ID              /*记录ID*/
		,ATTRIB_22           /*买赠总金额*/
		,ATTRIB_55           /*是否秒杀订单*/
		,ATTRIB_20           /*优惠券金额*/
		,O2O_FORCED_PICKUP   /*是否兜底订单*/
		,ATTRIB_07           /*物流状态*/
		,O2O_RECIEVER_ID     /*收货地址ID*/
		,ATTRIB_41           /*商户ID*/
		,ATTRIB_09           /*是否O2O订单*/
		,O2O_PAY_TYPE        /*支付方式*/
		,ATTRIB_01           /*详细地址（收货地址）*/
		,ATTRIB_38           /*区县（收货地址）*/
		,ATTRIB_37           /*城市（收货地址）*/
		,ATTRIB_36           /*省（收货地址）*/
		,ATTRIB_48           /*订单状态*/
		,ATTRIB_29           /*收货时间*/
		,X_ATTRIB_68         /*城市ID，用于Join行政区域*/
		,ATTRIB_44           /*存Platform Order*/
		,X_ATTRIB_63         /*配送时间段*/
		,X_ATTRIB_62         /*配送时间*/
		,X_ATTRIB_61         /*配送时间要求*/
		,ATTRIB_46           /*结算状态*/
		,ATTRIB_17           /*成交金额*/
		,ATTRIB_16           /*特价优惠金额*/
		,ATTRIB_14           /*报价金额*/
		,ATTRIB_21           /*平台满减金额*/
		,ATTRIB_40           /*配送方式*/
		,X_ORDER_DT          /*下单时间*/
		,X_ORDER_DISCOUNT    /*未知字段*/
		,X_ACCNT_ID          /*消费者id*/
		,ATTRIB_19           /*纬度*/
		,ATTRIB_18           /*经度*/
		,ATTRIB_39           /*存O2O Platform*/
		,ATTRIB_47           /*买家留言*/
		,ATTRIB_49           /*校验状态*/
		,ATTRIB_43           /*校验码*/
		,ATTRIB_50           /*是否团购*/
		,O2O_TIP             /*小费*/
		,ATTRIB_35           /*收货人电话*/
		,ATTRIB_34           /*收货人姓名*/
		,FIGHT_GROUP_FLG     /*是否拼团订单*/
		,ORDER_TYPE          /*订单类型*/
		,DISCNT_REASON       /*优惠原因*/
		,TAX_EXEMPT_FLG      /*未知字段*/
		,BILLABLE_FLG        /*未知字段*/
		,APPROVED_FLG        /*未知字段*/
		,DISCNT_AMT          /*平台满减金额（头）*/
		,FREIGHT             /*运费*/
		,COUPON_ID           /*优惠券id*/
		,GROUP_ID            /*团id*/
		,FIGHT_GROUPS_ID     /*拼团id*/
		,ORDER_NUM           /*订单编号*/
		) values (

		 #{id}               /*记录ID*/
		,#{attrib22}         /*买赠总金额*/
		,#{attrib55}         /*是否秒杀订单*/
		,#{attrib20}         /*优惠券金额*/
		,#{forcePickup}      /*是否兜底订单*/
		,GET_LOV_VAL(#{usercorpid},'TB_O2O_LOGISTICS_STATUS',#{logisticsStatus})/*物流状态*/
		,#{receiverId}       /*收货地址ID*/
		,#{dsrId}            /*商户ID*/
		,#{attrib09}         /*是否O2O订单*/
		,GET_LOV_VAL(#{usercorpid},'TB_O2O_PAY_TYPE',#{payType})/*支付方式*/
		,#{detailAddress}    /*详细地址（收货地址）*/
		,#{district}         /*区县（收货地址）*/
		,#{city}             /*城市（收货地址）*/
		,#{province}         /*省（收货地址）*/
		,GET_LOV_VAL(#{usercorpid},'TB_O2O_ORDER_STATUS',#{orderStatus})/*订单状态*/
		,#{receiveTime}      /*收货时间*/
		,#{cityId}           /*城市ID，用于Join行政区域*/
		,#{attrib44}         /*存Platform Order*/
		,#{xAttrib63}        /*配送时间段*/
		,#{xAttrib62}        /*配送时间*/
		,#{xAttrib61}        /*配送时间要求*/
		,#{attrib46}         /*结算状态*/
		,#{payFee}           /*成交金额*/
		,#{deductionFee}     /*特价优惠金额*/
		,#{productFee}       /*报价金额*/
		,#{attrib21}         /*平台满减金额*/
		,#{deliveryType}     /*配送方式*/
		,#{orderTime}        /*下单时间*/
		,#{orderDiscount}    /*未知字段*/
		,#{customerId}        /*消费者id*/
		,#{latitude}         /*纬度*/
		,#{longitude}        /*经度*/
		,#{tbShopName}       /*存O2O Platform*/
		,#{message}          /*买家留言*/
		,#{checkStatus}      /*校验状态*/
		,#{checkCode}        /*校验码*/
		,#{attrib50}         /*是否团购*/
		,#{tip}              /*小费*/
		,#{recieverPhone}    /*收货人电话*/
		,#{recieverName}     /*收货人姓名*/
		,#{fightGroupFlg}    /*是否拼团订单*/
		,#{orderType}        /*订单类型*/
		,#{discntReason}     /*优惠原因*/
		,#{taxExemptFlg}     /*未知字段*/
		,#{billableFlg}      /*未知字段*/
		,#{approvedFlg}      /*未知字段*/
		,#{discntAmt}        /*平台满减金额（头）*/
		,#{freight}          /*运费*/
		,#{couponId}         /*优惠券id*/
		,#{groupId}          /*团id*/
		,#{fightGroupsId}    /*拼团id*/
		,#{orderNum}         /*订单编号*/
		)
	</insert>

	<update id="update" parameterType="com.hand.base.brandOrder.model.Order">
		UPDATE S_ORDER_X SET
		 ATTRIB_22           =#{attrib22}         /*买赠总金额*/
		,ATTRIB_55           =#{attrib55}         /*是否秒杀订单*/
		,ATTRIB_20           =#{attrib20}         /*优惠券金额*/
		,O2O_FORCED_PICKUP   =#{forcePickup}      /*是否兜底订单*/
		,ATTRIB_07           =GET_LOV_VAL(#{usercorpid},'TB_O2O_LOGISTICS_STATUS',#{logisticsStatus})/*物流状态*/
		,O2O_RECIEVER_ID     =#{receiverId}       /*收货地址ID*/
		,ATTRIB_41           =#{dsrId}            /*商户ID*/
		,ATTRIB_09           =#{attrib09}         /*是否O2O订单*/
		,O2O_PAY_TYPE        =GET_LOV_VAL(#{usercorpid},'TB_O2O_PAY_TYPE',#{payType})/*支付方式*/
		,ATTRIB_01           =#{detailAddress}    /*详细地址（收货地址）*/
		,ATTRIB_38           =#{district}         /*区县（收货地址）*/
		,ATTRIB_37           =#{city}             /*城市（收货地址）*/
		,ATTRIB_36           =#{province}         /*省（收货地址）*/
		,ATTRIB_48           =GET_LOV_VAL(#{usercorpid},'TB_O2O_ORDER_STATUS',#{orderStatus})/*订单状态*/
		,ATTRIB_29           =#{receiveTime}      /*收货时间*/
		,X_ATTRIB_68         =#{cityId}           /*城市ID，用于Join行政区域*/
		,ATTRIB_44           =#{attrib44}         /*存Platform Order*/
		,X_ATTRIB_63         =#{xAttrib63}        /*配送时间段*/
		,X_ATTRIB_62         =#{xAttrib62}        /*配送时间*/
		,X_ATTRIB_61         =#{xAttrib61}        /*配送时间要求*/
		,ATTRIB_46           =#{attrib46}         /*结算状态*/
		,ATTRIB_17           =#{payFee}           /*成交金额*/
		,ATTRIB_16           =#{deductionFee}     /*特价优惠金额*/
		,ATTRIB_14           =#{productFee}       /*报价金额*/
		,ATTRIB_21           =#{attrib21}         /*平台满减金额*/
		,ATTRIB_40           =#{deliveryType}     /*配送方式*/
		,X_ORDER_DT          =#{orderTime}        /*下单时间*/
		,X_ORDER_DISCOUNT    =#{orderDiscount}    /*未知字段*/
		,X_ACCNT_ID          =#{customerId}        /*消费者id*/
		,ATTRIB_19           =#{latitude}         /*纬度*/
		,ATTRIB_18           =#{longitude}        /*经度*/
		,ATTRIB_39           =#{tbShopName}       /*存O2O Platform*/
		,ATTRIB_47           =#{message}          /*买家留言*/
		,ATTRIB_49           =#{checkStatus}      /*校验状态*/
		,ATTRIB_43           =#{checkCode}        /*校验码*/
		,ATTRIB_50           =#{attrib50}         /*是否团购*/
		,O2O_TIP             =#{tip}              /*小费*/
		,ATTRIB_35           =#{recieverPhone}    /*收货人电话*/
		,ATTRIB_34           =#{recieverName}     /*收货人姓名*/
		,FIGHT_GROUP_FLG     =#{fightGroupFlg}    /*是否拼团订单*/
		,ORDER_TYPE          =#{orderType}        /*订单类型*/
		,DISCNT_REASON       =#{discntReason}     /*优惠原因*/
		,TAX_EXEMPT_FLG      =#{taxExemptFlg}     /*未知字段*/
		,BILLABLE_FLG        =#{billableFlg}      /*未知字段*/
		,APPROVED_FLG        =#{approvedFlg}      /*未知字段*/
		,DISCNT_AMT          =#{discntAmt}        /*平台满减金额（头）*/
		,FREIGHT             =#{freight}          /*运费*/
		,COUPON_ID           =#{couponId}         /*优惠券id*/
		,GROUP_ID            =#{groupId}          /*团id*/
		,FIGHT_GROUPS_ID     =#{fightGroupsId}    /*拼团id*/
		,ORDER_NUM           =#{orderNum}         /*订单编号*/
		WHERE ROW_ID=#{id}
	</update>
	
	<update id="brandUpdate" parameterType="com.hand.base.brandOrder.model.Order">
		UPDATE S_ORDER_X SET
		ATTRIB_48          		=#{orderStatus}			/*订单状态*/
		<if test="logisticsStatus != null and logisticsStatus != '' ">
		,ATTRIB_07				=#{logisticsStatus}		/*物流状态*/
		</if>
		<if test="logisticsCompany != null and logisticsCompany != '' ">
		,LOGISTICS_COMPANY  	=#{logisticsCompany}	/*物流公司*/
		</if>
		<if test="logisticsOddNumber != null and logisticsOddNumber != '' ">
		,LOGISTICS_ODD_NUMBER	=#{logisticsOddNumber}	/*物流单号*/
		</if>
		<if test=" shippingTime != null and shippingTime != '' ">
		,SHIPPING_TIME 			= #{shippingTime}		/*发运时间*/
		</if>
		<if test=" receiveTime != null and receiveTime != '' ">
		,ATTRIB_29 				= #{receiveTime}		/*签收时间*/
		</if>
		<if test=" afterSaleCycle != null and afterSaleCycle != '' ">
		,AFTERSALE_CYCLE 		= #{afterSaleCycle}		/*售后周期*/
		</if>
		<if test=" cancelReason != null and cancelReason != '' ">
		,CANCEL_REASON 			= #{cancelReason}		/*备注强制完成原因*/
		</if>
		WHERE ROW_ID=#{id}
	</update>
	<delete id="deleteById" parameterType="com.hand.base.brandOrder.model.Order">
		DELETE FROM S_ORDER_X WHERE ROW_ID=#{id} AND CORP_ID=#{usercorpid}
	</delete>
</mapper>
